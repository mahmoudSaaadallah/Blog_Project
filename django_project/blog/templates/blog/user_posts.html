{% extends 'blog/base.html' %} {% block content %}
<div class="d-flex">
  <h1 class="mb-4">Posts by {{ view.kwargs.username }}</h1>
  <h3 class="ms-auto">({{ page_obj.paginator.count }})</h3>
</div>

{% for post in posts %}
<article class="d-flex media content-section align-items-start">
  <img
    class="rounded-circle article-img mr-3"
    src="{{ post.author.profile.image.url }}"
    alt="" />

  <div class="flex-grow-1">
    <div
      class="d-flex w-100 justify-content-between align-items-center media-body mb-1">
      <a
        class="mr-2 text-decoration-none link-hover-brown link-color-dark"
        href="{% url 'user-posts' view.kwargs.username %}"
        >{{ post.author }}</a
      >
      <small class="text-muted">{{ post.date_posted }}</small>
    </div>
    <hr />
    <h2 class="mb-1">
      <a
        class="article-title text-decoration-none"
        href="{% url 'post-detail' post.pk %}"
        >{{ post.title }}</a
      >
    </h2>

    <p class="article-content mb-0 preview">{{ post.content }}</p>
    <br />
    {% comment %} Display Read more... if the lenght of the post is more that 50
    Characters {% endcomment %} {% if post.content|length > 50 %}
    <a
      class="text-decoration-none link-hover-brown link-color-green"
      href="{% url 'post-detail' post.pk %}"
      >Read more...</a
    >
    {% endif %}
  </div>
</article>

{% endfor %} {% comment %} pagination {% endcomment %}
<div>
  <hr />
  {% if is_paginated %} {% if page_obj.has_previous %}
  <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
  <a
    class="btn btn-outline-info mb-4"
    href="?page={{ page_obj.previous_page_number }}"
    >Previous</a
  >
  {% endif %}
  <span></span>
  {% for num in page_obj.paginator.page_range %} {% if page_obj.number == num %}
  <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
  {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
  <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
  {% endif %} {% endfor %} {% if page_obj.has_next %}
  <a
    class="btn btn-outline-info mb-4"
    href="?page={{ page_obj.next_page_number }}"
    >Next</a
  >
  <a
    class="btn btn-outline-info mb-4"
    href="?page={{ page_obj.paginator.num_pages }}"
    >Last</a
  >
  {% endif %} {% endif %}
  <br />
</div>

{% endblock content %}
